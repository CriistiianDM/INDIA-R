---
output:
  pdf_document: default
  html_document: default
---
```{r setup, include=FALSE}
# Instalar paquetes si es necesario
if(!require(readr)) install.packages("readr")
if(!require(dplyr)) install.packages("dplyr")
if(!require(ggplot2)) install.packages("ggplot2")
if(!require(knitr)) install.packages("knitr")
if(!require(tidyr)) install.packages("tidyr")

library(readr)
library(dplyr)
library(ggplot2)
library(knitr)
library(tidyr)
```

```{r, out.width='20%', echo=FALSE}
#knitr::include_graphics("public/assests/logo/logo.jpg")
```

---
title: "DATOS DE PRODUCCION DE CULTIVOS INDIA"
author: 
  - "Leslie Johana Galviz"
  - "Cristian Machado"
date: "2024"
output: 
  pdf_document:
    latex_engine: xelatex
geometry: margin=1in
header-includes:
  - \usepackage{fancyhdr}
  - \pagestyle{fancy}
  - \fancyhead[L]{\includegraphics[width=2cm]{C:/Users/USUARIO/Documents/GitHub/BRICS-R/public/assests/logo/logo.jpg}}
  - \setlength{\headheight}{40pt}
  - \usepackage{setspace}
  - \doublespacing
  - \doublespacing
  - \doublespacing
---


\begin{center}
\textbf{**Docente:** Yennyfer Portilla Yela} \\[1ex]
\end{center}


\vfill

\begin{center}
\textbf{Universidad del Valle - Facultad de Ingeniería} \\[1ex]
\textbf{Probabilidad y Estadística} \\[1ex]
\textbf{Santiago de Cali} \\[1ex]
\end{center}

\newpage

# Tabla de Contenido

- Introducción
- Objetivos
- Informe sobre Variables de Datos de Cultivo en India
- Métodos
- Resultados De La Investigación 
- Conclusiones
- Referencias 

\newpage


# Introducción

<p>En un mundo donde la seguridad alimentaria y la sostenibilidad agrícola son cada vez más cruciales, comprender las dinámicas de la producción de cultivos se convierte en un pilar fundamental para la formulación de políticas agrícolas y la toma de decisiones estratégicas en el sector agroalimentario.</p>

<p>
 India es uno de los grandes productores de alimentos a nivel mundial. Tiene cultivos clave, como arroz, trigo, caña de azúcar, algodón, frutas y verduras. Específicamente, India produce alrededor del 10.9% de las frutas y el 8.6% de las verduras a nivel mundial. También es el mayor productor de legumbres, cubriendo aproximadamente el 25% de la producción global y satisfaciendo el 27% de la demanda mundial de esta importante fuente de proteínas. Además, India lidera la producción de leche y contribuye significativamente a la producción de especias, té y ganado.
</p>

<p>Este estudio se centra en un extenso conjunto de datos sobre la producción de cultivos en India, abarcando más de 246,000 registros a lo largo de varios años. La información incluye diversos tipos de cultivos, métricas de producción y datos regionales que reflejan la compleja realidad agrícola del país. Analizaremos las tendencias temporales y regionales en la producción de cultivos, identificando patrones significativos y variaciones regionales que influyen en la eficiencia y productividad agrícola.</p>

\newpage

# Objetivos

## Objetivo Principal

Desarrollar modelos predictivos que ayuden a anticipar futuros niveles de producción y detectar riesgos potenciales en la producción de alimentos en India, aplicando técnicas de series de tiempo y otras herramientas estadísticas, con el fin de predecir el comportamiento de la producción alimentaria en los próximos tres años y su impacto en la economía global.

## Objetivos Específicos

- Recopilar y analizar datos históricos de producción agrícola en India para identificar tendencias, patrones estacionales y fluctuaciones en la producción de diversos alimentos a lo largo del tiempo.

- Identificar y evaluar los riesgos potenciales que podrían afectar la producción de alimentos, como cambios climáticos, plagas, y políticas gubernamentales, y desarrollar estrategias para mitigar estos riesgos en función de las proyecciones obtenidas de los modelos predictivos.

\newpage

# Informe sobre Variables de Datos de Cultivo en India

## 1. State_Name (Nombre del Estado)
- **Descripción**: Representa el nombre del estado de la India donde se registraron los datos del cultivo.
- **Importancia**: Permite analizar variaciones en la producción agrícola entre diferentes estados, ayudando a identificar áreas con mayor potencial de producción y aquellas que podrían requerir apoyo adicional.
- **Clasificación**: Cualitativa.

## 2. District_Name (Nombre del Distrito)
- **Descripción**: Especifica el distrito dentro del estado donde se recopilaron los datos del cultivo.
- **Importancia**: Facilita un análisis más detallado a nivel regional, permitiendo la identificación de patrones locales y el diseño de políticas específicas para mejorar la producción en distritos con bajo rendimiento.
- **Clasificación**: Cualitativa.

## 3. Crop_Year (Año de Cultivo)
- **Descripción**: Indica el año en el que se cosechó el cultivo.
- **Importancia**: Es esencial para el análisis de tendencias temporales en la producción agrícola, permitiendo comparar datos de diferentes años y evaluar el impacto de factores externos como cambios climáticos o políticas agrícolas.
- **Clasificación**: Cuantitativa.

## 4. Temporada (Temporada Agrícola)
- **Descripción**: Indica la temporada agrícola (por ejemplo, Kharif, Rabi) durante la cual se cultivó el cultivo.
- **Importancia**: Comprender las temporadas de cultivo ayuda a anticipar períodos de producción y escasez, así como a planificar mejor el uso de recursos hídricos y otros insumos agrícolas.
- **Clasificación**: Cualitativa.

## 5. Cultivo (Tipo de Cultivo)
- **Descripción**: Identifica el tipo de cultivo que se cultivó (por ejemplo, arroz, trigo, maíz).
- **Importancia**: Permite segmentar la producción agrícola y estudiar las preferencias del mercado, así como las necesidades de los agricultores en función de los cultivos específicos.
- **Clasificación**: Cualitativa.

## 6. Área (Superficie)
- **Descripción**: Representa la superficie total de tierra (en hectáreas o acres) utilizada para el cultivo.
- **Importancia**: Proporciona datos sobre la escala de producción y la disponibilidad de tierras para cultivos, lo que es crucial para estimar la capacidad de producción y la eficiencia del uso del suelo.
- **Clasificación**: Cuantitativa.

## 7. Producción (Cantidad Total)
- **Descripción**: Indica la cantidad total (en toneladas métricas) del cultivo producido en el área especificada.
- **Importancia**: Esta variable es clave para el análisis de la productividad agrícola y la planificación de la oferta en el mercado. Ayuda a prever el comportamiento futuro de la producción y su impacto en la economía global.
- **Clasificación**: Cuantitativa.

\newpage

# Métodos
La limpieza de datos es un paso esencial para garantizar la calidad y fiabilidad de los análisis realizados. En este estudio, se busca optimizar el conjunto de datos sobre la producción de cultivos en India para obtener conclusiones más precisas.

## Proceso de Limpieza

1. **Carga de Datos**: Se cargaron múltiples archivos CSV desde un directorio y se combinaron en un único conjunto de datos.

2. **Separación de Columnas**: Inicialmente, todos los datos estaban en una sola columna. Se separaron en varias columnas representativas como: Estado, Distrito, Año de Cultivo, Temporada, Cultivo, Área y Producción.

3. **Detección de Datos Faltantes**: Se realizó un análisis de los datos faltantes, identificando registros incompletos mediante un mapa de datos faltantes.

4. **Conversión de Tipos de Datos**: Las columnas se convirtieron a sus tipos adecuados, asegurando que los valores numéricos se trataran correctamente para análisis futuros.

5. **Eliminación de Datos Faltantes y Duplicados**: Se eliminaron filas con datos faltantes y registros duplicados para mantener la integridad del conjunto de datos.

6. **Identificación y Eliminación de Valores Atípicos**: Se revisaron los datos en busca de valores atípicos utilizando gráficos, y se eliminaron aquellos que no cumplían con criterios razonables.

7. **Normalización de Texto y Filtrado**: Se normalizó el texto de las columnas para estandarizar la nomenclatura y se filtraron registros no válidos, asegurando que solo se mantuvieran entradas con valores positivos y años dentro de un rango razonable.

## Proceso de Procesamiento de Datos
Ahora contamos con un conjunto de datos más preciso, lo que nos permite incorporar nuevas variables para la formulación de conclusiones. Utilizando diversas técnicas estadísticas, podremos llegar a conclusiones de alta calidad, minimizando la dispersión de datos y garantizando una interpretación más clara y relevante para poder culminar el objetivo.
\newpage

# Resultados De La Investigación 

```{r, out.width='100%', echo=FALSE}

csv_directory <- "Investigacion"

csv_files <- list.files(path = csv_directory, pattern = "\\.csv$", full.names = TRUE)

combined_data <- do.call(rbind, lapply(csv_files, function(file) {
  read.csv(file, sep = ",", stringsAsFactors = FALSE)
}))

# Saco los datos unicos por año y tipo de cultivo
unique_crops <- unique(combined_data$Crop)
unique_year <- unique(combined_data$Crop_Year)

# Saco el promedio del rendimiento por año de un tipo de cultivo 
average_yield <- aggregate(Rendimiento ~ Crop + Crop_Year, data = combined_data, FUN = mean)

top_crops_per_year <- average_yield %>%
  group_by(Crop_Year) %>%
  arrange(desc(Rendimiento)) %>%
  slice_head(n = 10) %>%
  ungroup()

# Ver los resultados

# Filtrar los datos para el primer año
first_year_data <- top_crops_per_year %>%
  filter(Crop_Year == 2009)


top_crops <- unique(top_crops_per_year$Crop)

# Filtrar el promedio de rendimiento solo para los cultivos principales
top_crops_data <- average_yield %>%
  filter(Crop %in% top_crops)

# Crear el gráfico
ggplot(data = top_crops_data, aes(x = Crop_Year, y = Rendimiento, color = Crop, group = Crop)) +
  geom_line(linewidth  = 1) +  # Línea para cada cultivo
  geom_point(size = 2) + # Puntos en la línea
  labs(title = "Rendimiento Promedio de los 10 Principales Cultivos por Año",
       x = "Año",
       y = "Rendimiento Promedio",
       color = "Cultivo") +
  theme_minimal() +
  theme(legend.position = "bottom")
```

<p>
Este gráfico muestra el "Rendimiento Promedio de los 10 Principales Cultivos por Año" en India, donde el rendimiento se calcula como la relación entre el área cultivada y la producción total (rendimiento = producción / área). Esta métrica nos da una idea de la productividad de cada cultivo, es decir, qué tan eficiente es cada cultivo en términos de producción por unidad de área.
</p>

<p>
A lo largo de los años, observamos una notable variación en el rendimiento promedio de los cultivos. En particular, el coco (representado en color amarillo en el gráfico) destaca de manera significativa en comparación con otros cultivos, manteniendo consistentemente altos niveles de rendimiento. Esto sugiere que el coco es una de las principales fuentes de productividad agrícola en India y, de hecho, constituye una de sus principales exportaciones agrícolas.
</p>

<p>
En contraste, otros cultivos muestran rendimientos más bajos en comparación al coco, lo que resalta la especialización de India en la producción de coco debido a sus condiciones agroclimáticas y técnicas de cultivo eficientes. Además, se observa que en 2010 hubo un pico en la línea rosa de otro cultivo, aunque se trata de un fenómeno aislado en comparación con la tendencia constante del rendimiento del coco.
</p>

# Análisis de la Variabilidad del Rendimiento de Cereal y Leche
A continuación, se presenta un análisis de la variabilidad del rendimiento de cereal y leche en India a lo largo de los años, basado en un gráfico de caja (boxplot) que muestra el rendimiento promedio anual entre 1997 y 2014.

```{r, out.width='100%', echo=FALSE}
coconut_data <- combined_data %>%
  filter(Crop == "Other Cereals & Millets" & is.finite(Rendimiento))

# Crear el gráfico de cajas
ggplot(data = coconut_data, aes(x = as.factor(Crop_Year), y = Rendimiento)) +
  geom_boxplot(fill = "lightblue", color = "black") +
  labs(title = "Variabilidad del Rendimiento del Cereal y Leche por Año",
       x = "Año",
       y = "Rendimiento",
       color = "Cultivo") +
  theme_minimal()
```

El gráfico de caja muestra la distribución del rendimiento de cereal y leche para cada año. La caja de cada año representa la mediana, el rango intercuartílico y los valores atípicos, los cuales corresponden a puntos de rendimiento inusualmente altos o bajos.

- Año 2004: En este año, la mediana del rendimiento de cereal y leche es relativamente 


\newpage

```{r, out.width='100%', echo=FALSE}

sugarcane_data <- combined_data %>%
  filter(Crop == "Sugarcane" & Crop_Year >= 2010 & Crop_Year <= 2015)

# Calcular el promedio de rendimiento y producción por estado
average_metrics_by_state <- sugarcane_data %>%
  group_by(State_Name) %>%
  summarise(Average_Rendimiento = mean(Rendimiento, na.rm = TRUE),
            Average_Production = mean(Production, na.rm = TRUE)) %>%
  arrange(desc(Average_Rendimiento))

# Seleccionar los 15 estados con el mayor rendimiento promedio
top_15_states_metrics <- average_metrics_by_state %>%
  slice_head(n = 15)

# Reestructurar los datos en formato largo para el gráfico combinado
top_15_states_long <- top_15_states_metrics %>%
  pivot_longer(cols = c("Average_Rendimiento", "Average_Production"),
               names_to = "Metric",
               values_to = "Value")

# Crear el gráfico combinado
ggplot(data = top_15_states_long, aes(x = reorder(State_Name, Value), y = Value, fill = Metric)) +
  geom_bar(stat = "identity", position = "dodge", color = "black") +
  scale_fill_manual(values = c("Average_Rendimiento" = "skyblue", "Average_Production" = "lightgreen"),
                    labels = c("Rendimiento Promedio", "Producción Promedio")) +
  labs(title = "Top 15 Estados con Mayor Rendimiento y Producción Promedio de Sugarcane (2010-2015)",
       x = "Estado",
       y = "Promedio",
       fill = "Métrica") +
  coord_flip() +  # Voltear el gráfico para facilitar la lectura de los nombres
  theme_minimal()
```


\newpage
<a href="https://www.business-standard.com/article/markets/sugarcane-area-poised-to-rise-by-8-10-in-2011-12-111052600014_1.html">primer Link</a>
<a href="https://apps.fas.usda.gov/newgainapi/api/report/downloadreportbyfilename?filename=Sugar%20Annual_New%20Delhi_India_4-14-2011.pdf">segundo link</a>